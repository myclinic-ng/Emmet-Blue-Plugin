ALTER TABLE Lab.Labs ALTER COLUMN LabName VARCHAR(250)
GO

CREATE TABLE Lab.LinkedExternalLab (
	LinkedExternalLabID INT PRIMARY KEY IDENTITY,
	LabID INT,
	ExternalBusinessID INT,
	ExternalLabID INT,
	DateCreated DATETIME DEFAULT GETDATE(),
	FOREIGN KEY (LabID) REFERENCES Lab.Labs (LabID) ON UPDATE CASCADE ON DELETE CASCADE
)
GO

ALTER TABLE Lab.LabRequests ADD LabID INT FOREIGN KEY REFERENCES Lab.Labs (LabID) ON UPDATE CASCADE ON DELETE SET NULL
GO

CREATE TABLE Lab.LinkedExternalRequests (
	LinkedRequestID INT PRIMARY KEY IDENTITY,
	LocalRequestID INT NOT NULL,
	ExternalRequestID INT NOT NULL,
	ExternalBusinessID INT NOT NULL,

	UNIQUE(ExternalRequestID, ExternalBusinessID),
	FOREIGN KEY (LocalRequestID) REFERENCES Lab.LabRequests (RequestID) ON UPDATE CASCADE ON DELETE CASCADE
)
GO